---
const { translations } = Astro.props;
---

<!-- Brief intro section -->
<section class="usecases">
  <div class="container text-center">
    <img src="/images/subo-neon2-100.png" alt="Subo the Survey Bot" height="100" class="intro__icon" id="avatar"/>
    <h2 class="title text-white"><strong>{translations.usecasesTitle}</strong></h2>
    <p class="subtitle text-white">{translations.usecasesSubtitle}</p>
    <div class="usecases__content">
      <div class="usecases-grid" id="usecases-grid" style="display: none;">
        <!-- Cards will be dynamically inserted here -->
      </div>
    <button id="inspire-me" class="button button--accent-bg">{translations.usecasesInspireBtn}</button>
    </div>
  </div>
</section>

<style>
.usecases {
  background: linear-gradient(var(--primary-dark),var(--dark));
  padding: 1rem;
}

.container.text-center {
  text-align: center;
  max-width: 900px;
  padding: 0 2rem;
}

.usecases-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* Maximum 2 cards per row */
  gap: 1.5rem;
  margin: 2rem 0;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.4s ease, transform 0.4s ease;
}

.usecases-grid.show {
  opacity: 1;
  transform: translateY(0);
}



.intro__icon {
  margin-bottom: 1.5rem;
}

.usecases__content {
  margin: 2rem 0;
  padding: 2rem;
}


#inspire-me {
  margin: 1.5rem 0;
 /* font-size: 1rem;
  font-weight: 600;*/
}

@media (max-width: 600px) {
  .usecases-grid {
    grid-template-columns: 1fr;
    gap: 1rem;
    margin: 1rem 0;
  }
  .container.text-center {
    padding: 0 1rem;
    max-width: 100%;
    box-sizing: border-box;
  }
  .usecases {
    padding: 0.5rem;
  }
}
</style>

<script define:vars={{ allUseCases: translations.usecasesList, inspireBtn: translations.usecasesInspireBtn }}>
function getRandomUseCases(arr, n) {
  return arr
    .map(value => ({ value, sort: Math.random() }))
    .sort((a, b) => a.sort - b.sort)
    .slice(0, n)
    .map(({ value }) => value);
}

document.addEventListener('DOMContentLoaded', function() {
  const avatar = document.querySelector('.intro__icon');
  const inspireButton = document.getElementById('inspire-me');
  const usecasesGrid = document.getElementById('usecases-grid');
  
  const originalSrc = '/images/subo-neon2-100.png';
  const hoverSrc = '/images/subo-open.png';
  
  // Avatar hover effect
  avatar.addEventListener('mouseenter', function() {
    this.src = hoverSrc;
  });
  
  avatar.addEventListener('mouseleave', function() {
    this.src = originalSrc;
  });
  
  avatar.addEventListener('error', function() {
    console.log('Image failed to load:', this.src);
  });

  // Inspire button functionality
  inspireButton.addEventListener('click', function() {
    const randomUseCases = getRandomUseCases(allUseCases, 2);
    
    // Clear existing cards
    usecasesGrid.innerHTML = '';
    
    // Add new random cards
    randomUseCases.forEach(usecase => {
      const cardElement = document.createElement('div');
      cardElement.className = 'usecase-card';
      cardElement.innerHTML = `<span>${usecase}</span>`;
      usecasesGrid.appendChild(cardElement);
    });
    
    // Show the grid with animation
    usecasesGrid.style.display = 'grid';
    setTimeout(() => {
      usecasesGrid.classList.add('show');
    }, 50);
    
    // Update button text
    this.innerHTML = inspireBtn;
  });
});
</script>